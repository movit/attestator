<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
	xmlns:g="urn:import:com.google.gwt.user.client.ui" 
	xmlns:gxt="urn:import:com.sencha.gxt.widget.core.client"
	xmlns:row="urn:import:com.sencha.gxt.widget.core.client.container"
	xmlns:menu="urn:import:com.sencha.gxt.widget.core.client.menu"
	xmlns:button="urn:import:com.sencha.gxt.widget.core.client.button"
	xmlns:form="urn:import:com.sencha.gxt.widget.core.client.form"
	xmlns:toolbar="urn:import:com.sencha.gxt.widget.core.client.toolbar"
	xmlns:grid="urn:import:com.sencha.gxt.widget.core.client.grid"
	xmlns:att="urn:import:com.attestator.admin.client.ui.widgets">
    
    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="maxWidthMinHeightVLData">
        <ui:attributes width="1" height="-1" />
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="minWidthMinHeightVLData">
        <ui:attributes width="-1" height="-1" />
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="maxWidthMinHeightVLDataVertMargins">
        <ui:attributes width="1" height="-1" margins="{marginsT5B5}"/>
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="maxWidthMaxHeightVLData">
        <ui:attributes width="1" height="1"/>
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="questionsBoxesVLData">
        <ui:attributes width="-1" height="80" margins="{marginsTop}"/>
    </ui:with>
    
    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="publicationParamsVLData">
        <ui:attributes width="-1" height="120"/>
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="randomOrderBoxVLData">
        <ui:attributes width="-1" height="22" margins="{margins5}"/>
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="hlWithHeightVLData">
        <ui:attributes width="1" height="45" />
    </ui:with>

    <ui:with type="com.sencha.gxt.core.client.util.Margins" field="marginsBottom">
        <ui:attributes top="0" right="0" bottom="5" left="0" />
    </ui:with>

    <ui:with type="com.sencha.gxt.core.client.util.Margins" field="marginsTop">
        <ui:attributes top="10" right="0" bottom="0" left="0" />
    </ui:with>

    <ui:with type="com.sencha.gxt.core.client.util.Margins" field="marginsT5B5">
        <ui:attributes top="5" right="0" bottom="5" left="0" />
    </ui:with>

    <ui:with type="com.sencha.gxt.core.client.util.Margins" field="marginsB5L5">
        <ui:attributes top="0" right="0" bottom="5" left="5" />
    </ui:with>

    <ui:with type="com.sencha.gxt.core.client.util.Margins" field="marginsRowFields">
        <ui:attributes top="0" right="20" bottom="0" left="0" />
    </ui:with>
    
    <ui:with type="com.sencha.gxt.core.client.util.Margins" field="margins5">
        <ui:attributes top="5" right="5" bottom="5" left="5" />
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.HorizontalLayoutContainer.HorizontalLayoutData"
        field="minWidthMinHeightHLData">
        <ui:attributes width="-1" height="-1" margins="{marginsRowFields}" />
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.HorizontalLayoutContainer.HorizontalLayoutData"
        field="minWidthMaxHeightHLData">
        <ui:attributes width="-1" height="1" margins="{marginsRowFields}" />
    </ui:with>

    <ui:with
        type="com.sencha.gxt.widget.core.client.container.VerticalLayoutContainer.VerticalLayoutData"
        field="choicesVLData">
        <ui:attributes width="1" height="-1"  />
    </ui:with>
    
    <ui:with field="integerPropertyEditor"
        type="com.sencha.gxt.widget.core.client.form.NumberPropertyEditor" />
    
    <ui:with field="longNumberFormat" type="com.google.gwt.i18n.client.NumberFormat" />

    <ui:with field="milisecondsPropertyEditor"
        type="com.sencha.gxt.widget.core.client.form.NumberPropertyEditor" />

    <ui:with field="doublePropertyEditor"
        type="com.sencha.gxt.widget.core.client.form.NumberPropertyEditor" />

    <ui:with field="doubleNumberFormat" type="com.google.gwt.i18n.client.NumberFormat" />
    
    
    <ui:style>
        .bold {
	       font-weight: bold;
        }
    </ui:style>
     
	<gxt:Window ui:field="window" pixelSize="750, 500" modal="true"
		maximizable="false" resizable="false" blinkModal="true" headingText="Публикация"
		focusWidget="{cancelButton}">
        <row:VerticalLayoutContainer ui:field="top" scrollMode="AUTOY" adjustForScroll="true">
	        <row:child layoutData="{maxWidthMinHeightVLDataVertMargins}">
	            <g:Label styleName='{style.bold}' ui:field="metatestName"/>
	        </row:child>
            <row:child layoutData="{maxWidthMinHeightVLData}">
		        <form:FieldSet ui:field="fieldSet" headingText="Перед прохождением теста" collapsible="true">
		            <row:VerticalLayoutContainer>
		                <row:child layoutData="{maxWidthMinHeightVLData}">
		                    <form:FieldLabel labelAlign="TOP" text="Показать текст">
		                        <form:widget>
		                            <form:HtmlEditor ui:field="introduction"  enableLinks="false" height="140"
		                                enableAlignments="false" enableFont="false" />
		                        </form:widget>
		                    </form:FieldLabel>
		                </row:child>
                        <row:child layoutData="{questionsBoxesVLData}">
                            <row:HorizontalLayoutContainer>
                                <row:child layoutData="{minWidthMaxHeightHLData}">
                                    <row:VerticalLayoutContainer>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askLastName" boxLabel="Спросить фамилию"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askFirstName" boxLabel="Спросить имя"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askMiddleName" boxLabel="Спросить отчество"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askEmail" boxLabel="Спросить email"/>
                                        </row:child>
                                    </row:VerticalLayoutContainer>
                                </row:child>
                                <row:child layoutData="{minWidthMaxHeightHLData}">
                                    <row:VerticalLayoutContainer>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askLastNameRequired" boxLabel="Фамилию вводить обязательно"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askFirstNameRequired" boxLabel="Имя вводить обязательно"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askMiddleNameRequired" boxLabel="Отчество вводить обязательно"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="askEmailRequired" boxLabel="Email вводить обязательно"/>
                                        </row:child>
                                    </row:VerticalLayoutContainer>
                                </row:child>
                            </row:HorizontalLayoutContainer>
                        </row:child>
                        <row:child layoutData="{maxWidthMinHeightVLData}">
                            <form:FieldLabel labelAlign="TOP" text="Дополнительные поля перед тестом">
                                <form:widget>
                                    <att:AdditionalQuestionsList ui:field="additionalQuestions"/>
                                </form:widget>
                            </form:FieldLabel>
                        </row:child>
		                
		            </row:VerticalLayoutContainer>
		        </form:FieldSet>
            
            </row:child>
            <row:child layoutData="{maxWidthMinHeightVLData}">
                <form:FieldSet ui:field="publicationParamsFieldSet" headingText="Параметры публикации" collapsible="true">
                    <row:VerticalLayoutContainer>
                        <row:child layoutData="{publicationParamsVLData}">
                            <row:HorizontalLayoutContainer>
                                <row:child layoutData="{minWidthMaxHeightHLData}">
                                    <row:VerticalLayoutContainer>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:FieldLabel labelAlign="LEFT" text="Начало" labelWidth="118">
                                                <form:widget>
                                                    <att:DateTimeSelector ui:field="start"/>
                                                </form:widget>
                                            </form:FieldLabel>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:FieldLabel labelAlign="LEFT" text="Минут на тест" labelWidth="120" >
                                                <form:widget>
                                                    <form:NumberField ui:field="maxTakeTestTime"
                                                        editor="{milisecondsPropertyEditor}" format="{longNumberFormat}"
                                                        width="184" allowBlank="true" emptyText="неограничено" />
                                                </form:widget>
                                            </form:FieldLabel>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:FieldLabel labelAlign="LEFT" text="Разрешить попыток" labelWidth="120" >
                                                <form:widget>
                                                    <form:NumberField ui:field="maxAttempts"
                                                        editor="{integerPropertyEditor}" format="{longNumberFormat}"
                                                        width="184" allowBlank="true" emptyText="неограничено" />
                                                </form:widget>
                                            </form:FieldLabel>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="allowSkipQuestions" boxLabel="Разрешить пропускать вопросы"/>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="allowInterruptTest" boxLabel="Разрешить прерывать тест"/>
                                        </row:child>                            
                                    </row:VerticalLayoutContainer>
                                </row:child>
                                <row:child layoutData="{minWidthMaxHeightHLData}">
                                    <row:VerticalLayoutContainer>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:FieldLabel labelAlign="LEFT" text="Окончание" labelWidth="118">
                                                <form:widget>
                                                    <att:DateTimeSelector ui:field="end"/>
                                                </form:widget>
                                            </form:FieldLabel>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:FieldLabel labelAlign="LEFT" text="Минут на вопрос" labelWidth="120" >
                                                <form:widget>
                                                    <form:NumberField ui:field="maxQuestionAnswerTime"
                                                        editor="{milisecondsPropertyEditor}" format="{longNumberFormat}"
                                                        width="184" allowBlank="true" emptyText="неограничено" />
                                                </form:widget>
                                            </form:FieldLabel>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:FieldLabel labelAlign="LEFT" text="Набрать баллов" labelWidth="120" >
                                                <form:widget>
                                                    <form:NumberField ui:field="minScore"
                                                        editor="{doublePropertyEditor}" format="{doubleNumberFormat}"
                                                        width="184" allowBlank="true" emptyText="неважно" />
                                                </form:widget>
                                            </form:FieldLabel>
                                        </row:child>
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="interruptOnFalure" boxLabel="Прерывать тест, если слишком много ошибок"/>
                                        </row:child>                            
                                        <row:child layoutData="{minWidthMinHeightVLData}">
                                            <form:CheckBox ui:field="randomQuestionsOrder" boxLabel="Вопросы в случайном порядке"/>
                                        </row:child>                            
                                    </row:VerticalLayoutContainer>
                                </row:child>
                            </row:HorizontalLayoutContainer>
                        </row:child>
                        
                    </row:VerticalLayoutContainer>
                
                </form:FieldSet>
            </row:child>
        </row:VerticalLayoutContainer>
        
        <gxt:button>
            <button:TextButton ui:field="saveButton" text="Сохранить" />
        </gxt:button>

		<gxt:button>
			<button:TextButton ui:field="cancelButton" text="Отмена" />
		</gxt:button>

	</gxt:Window>

</ui:UiBinder>